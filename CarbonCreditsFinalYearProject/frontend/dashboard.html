<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Emission Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                </div>
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">Carbon Emission Monitor</h1>
                    <p class="text-sm text-gray-500">Real-time Industrial Emission Tracking</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <button class="relative p-2 hover:bg-gray-100 rounded-lg">
                    <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                    </svg>
                    <span id="alertBadge" class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">28</span>
                </button>
                <button class="p-2 hover:bg-gray-100 rounded-lg">
                    <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-6 py-6">
        <!-- Alert Banner -->
        <div id="alertBanner" class="mb-6 p-4 rounded-lg hidden">
            <div class="flex items-center gap-3">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
                <div class="flex-1">
                    <p id="alertTitle" class="font-semibold"></p>
                    <p id="alertMessage" class="text-sm"></p>
                </div>
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <p class="text-sm text-gray-500 mb-1">Current Emission</p>
                <p id="currentEmission" class="text-3xl font-bold text-gray-900">850</p>
                <p class="text-xs text-gray-500 mt-1">kg CO₂/hour</p>
                <div id="emissionTrend" class="mt-2 flex items-center gap-1">
                    <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                    </svg>
                    <span class="text-xs text-green-600">-2.1%</span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <p class="text-sm text-gray-500 mb-1">Total Credits</p>
                <p class="text-3xl font-bold text-green-600">12,042</p>
                <p class="text-xs text-gray-500 mt-1">Carbon Credits</p>
                <div class="mt-2">
                    <span class="text-xs text-green-600">Available for trading</span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <p class="text-sm text-gray-500 mb-1">Active Sensors</p>
                <p class="text-3xl font-bold text-blue-600">4</p>
                <p class="text-xs text-gray-500 mt-1">IoT Devices Online</p>
                <div class="mt-2">
                    <span class="text-xs text-green-600">● All operational</span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <p class="text-sm text-gray-500 mb-1">System Health</p>
                <p class="text-3xl font-bold text-green-600">98%</p>
                <p class="text-xs text-gray-500 mt-1">Uptime Status</p>
                <div class="mt-2">
                    <span class="text-xs text-green-600">Excellent</span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <p class="text-sm text-gray-500 mb-1">Compliance</p>
                <p id="compliancePercent" class="text-3xl font-bold text-gray-900">85.0%</p>
                <p class="text-xs text-gray-500 mt-1">of Daily Limit</p>
                <div class="mt-2">
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div id="complianceBar" class="h-2 rounded-full bg-green-500" style="width: 85%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-Time Emission Graph -->
        <div class="bg-white p-6 rounded-lg shadow-sm border mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-900">Real-Time Emission Monitoring</h2>
                <span class="text-sm text-gray-500">Live data • Updates every 5 seconds</span>
            </div>
            <canvas id="emissionChart" height="100"></canvas>
        </div>

        <!-- Monthly Carbon Credit Trends -->
        <div class="bg-white p-6 rounded-lg shadow-sm border mb-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Monthly Carbon Credit Analysis</h2>
            <canvas id="creditChart" height="100"></canvas>
        </div>

        <!-- Daily Emission Records -->
        <div class="bg-white p-6 rounded-lg shadow-sm border mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-900">Daily Emission Records</h2>
                <button onclick="generateReport()" class="flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                    </svg>
                    Generate Report
                </button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="border-b">
                            <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Date</th>
                            <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">CO₂ Emissions</th>
                            <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Government Limit</th>
                            <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Carbon Credits</th>
                            <th class="text-left py-3 px-4 text-sm font-semibold text-gray-700">Status</th>
                        </tr>
                    </thead>
                    <tbody id="recordsTable">
                        <!-- Records will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Carbon Credit Summary -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-green-50 border border-green-200 p-6 rounded-lg">
                <h3 class="text-sm font-semibold text-green-900 mb-2">Credits Earned (This Month)</h3>
                <p class="text-3xl font-bold text-green-700">156</p>
                <p class="text-xs text-green-600 mt-1">Worth approx. $7,800</p>
            </div>
            
            <div class="bg-red-50 border border-red-200 p-6 rounded-lg">
                <h3 class="text-sm font-semibold text-red-900 mb-2">Credits Required (This Month)</h3>
                <p class="text-3xl font-bold text-red-700">42</p>
                <p class="text-xs text-red-600 mt-1">Purchase needed: $2,100</p>
            </div>
            
            <div class="bg-blue-50 border border-blue-200 p-6 rounded-lg">
                <h3 class="text-sm font-semibold text-blue-900 mb-2">Net Balance</h3>
                <p class="text-3xl font-bold text-blue-700">+114</p>
                <p class="text-xs text-blue-600 mt-1">Available for trading</p>
            </div>
        </div>
    </div>

    <script>
        // Data
        let currentEmission = 850;
        const emissionLimit = 1000;
        
        const dailyRecords = [
            { date: '2024-06-01', co2: 1000, credits: 1, status: 'earned' },
            { date: '2024-06-02', co2: 2000, credits: 2, status: 'deficit' },
            { date: '2024-06-03', co2: 900, credits: 0.5, status: 'earned' },
            { date: '2024-06-04', co2: 700, credits: 0.7, status: 'earned' },
            { date: '2024-06-05', co2: 300, credits: 3, status: 'earned' },
            { date: '2024-06-06', co2: 3000, credits: 3, status: 'deficit' }
        ];

        // Initialize Charts
        const emissionCtx = document.getElementById('emissionChart').getContext('2d');
        const emissionChart = new Chart(emissionCtx, {
            type: 'line',
            data: {
                labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                datasets: [{
                    label: 'Current Emission',
                    data: [720, 680, 820, 950, 890, 850],
                    borderColor: 'rgb(37, 99, 235)',
                    backgroundColor: 'rgba(37, 99, 235, 0.1)',
                    tension: 0.4,
                    borderWidth: 2
                }, {
                    label: 'Government Limit',
                    data: [1000, 1000, 1000, 1000, 1000, 1000],
                    borderColor: 'rgb(220, 38, 38)',
                    borderDash: [5, 5],
                    borderWidth: 2,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'CO₂ (kg/hour)'
                        }
                    }
                }
            }
        });

        const creditCtx = document.getElementById('creditChart').getContext('2d');
        const creditChart = new Chart(creditCtx, {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Credits Earned',
                    data: [45, 52, 38, 61, 48, 55],
                    backgroundColor: 'rgb(16, 185, 129)'
                }, {
                    label: 'Credits Deficit',
                    data: [12, 8, 15, 5, 10, 7],
                    backgroundColor: 'rgb(239, 68, 68)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Carbon Credits'
                        }
                    }
                }
            }
        });

        // Populate table
        function populateTable() {
            const tbody = document.getElementById('recordsTable');
            tbody.innerHTML = dailyRecords.map(record => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="py-3 px-4 text-sm text-gray-900">${record.date}</td>
                    <td class="py-3 px-4 text-sm text-gray-900">${record.co2} kg CO₂</td>
                    <td class="py-3 px-4 text-sm text-gray-500">1000 kg CO₂</td>
                    <td class="py-3 px-4 text-sm font-medium text-gray-900">${record.credits} CC</td>
                    <td class="py-3 px-4">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                            record.status === 'earned' 
                                ? 'bg-green-100 text-green-800' 
                                : 'bg-red-100 text-red-800'
                        }">
                            ${record.status === 'earned' ? '✓ Credits Earned' : '⚠ Credits Required'}
                        </span>
                    </td>
                </tr>
            `).join('');
        }

        // Update metrics
        function updateMetrics() {
            const newEmission = Math.floor(Math.random() * 300) + 700;
            currentEmission = newEmission;
            
            const emissionPercentage = ((currentEmission / emissionLimit) * 100).toFixed(1);
            const isNearLimit = currentEmission >= emissionLimit * 0.8;
            const isOverLimit = currentEmission > emissionLimit;

            // Update display
            document.getElementById('currentEmission').textContent = currentEmission;
            document.getElementById('compliancePercent').textContent = emissionPercentage + '%';
            
            // Update progress bar
            const bar = document.getElementById('complianceBar');
            bar.style.width = Math.min(emissionPercentage, 100) + '%';
            bar.className = `h-2 rounded-full ${
                isOverLimit ? 'bg-red-500' : isNearLimit ? 'bg-yellow-500' : 'bg-green-500'
            }`;

            // Update alert banner
            const banner = document.getElementById('alertBanner');
            if (isNearLimit) {
                banner.classList.remove('hidden');
                banner.className = `mb-6 p-4 rounded-lg flex ${
                    isOverLimit ? 'bg-red-50 border border-red-200' : 'bg-yellow-50 border border-yellow-200'
                }`;
                
                const title = document.getElementById('alertTitle');
                const message = document.getElementById('alertMessage');
                title.className = `font-semibold ${isOverLimit ? 'text-red-900' : 'text-yellow-900'}`;
                message.className = `text-sm ${isOverLimit ? 'text-red-700' : 'text-yellow-700'}`;
                
                title.textContent = isOverLimit ? 'EMISSION LIMIT EXCEEDED!' : 'WARNING: Approaching Emission Limit';
                message.textContent = isOverLimit 
                    ? `Current emissions: ${currentEmission} kg CO₂ (${emissionPercentage}% of limit). Immediate action required.`
                    : `Current emissions at ${emissionPercentage}% of daily limit. Consider reducing production output.`;
            } else {
                banner.classList.add('hidden');
            }

            // Update chart
            const now = new Date();
            const timeLabel = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            
            emissionChart.data.labels.shift();
            emissionChart.data.labels.push(timeLabel);
            emissionChart.data.datasets[0].data.shift();
            emissionChart.data.datasets[0].data.push(newEmission);
            emissionChart.update();
        }

        // Generate report function
        function generateReport() {
            alert('Generating compliance report for regulatory submission...');
        }

        // Initialize
        populateTable();
        
        // Update every 5 seconds
        setInterval(updateMetrics, 5000);
    </script>
</body>
</html>